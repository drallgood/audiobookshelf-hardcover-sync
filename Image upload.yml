# Image upload

## 1- Get token

curl 'https://hardcover.app/api/upload/google?file=cover-14.webp&path=editions/30404159' \
-X 'POST' \
-H 'Accept: */*' \
-H 'Sec-Fetch-Site: same-origin' \
-H 'Accept-Encoding: gzip, deflate, br' \
-H 'Accept-Language: en-US,en;q=0.9' \
-H 'Sec-Fetch-Mode: cors' \
-H 'Host: hardcover.app' \
-H 'Origin: https://hardcover.app' \
-H 'Content-Length: 0' \
-H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.1 Safari/605.1.15' \
-H 'Referer: https://hardcover.app/books/ready-player-two/editions/30404159/edit' \
-H 'Connection: keep-alive' \
-H 'Cookie: XSRF-TOKEN=tHfKxr17z6XoV7ynr3hspxbGSdbjvbatxhHn6Gl4y3JcqiKiqDi_Pta5O_im70GLZoibMk2f7JcCEP-Jv04eGA; _clientverse_session=4NO2tytbPjtJBge3m1gyl0bNgsHmix%2B7SOoh9J7m8rFKwODR3YPrqPFOPSgtrTzm8NBIVhQ5UA10d8deYRF1pr2Pet7ZxnJcrLLBXSr1tjph5dWrBCn0gyx6ko3xoKoLrajzsaEEP%2F4EJw%2FyHxzUhAYAyIfOVC8wcORUZfXO8ldcDmjVSR3%2FztgJHT%2B9BQt1wWiKCCraqgZrDOtXYV4xIRHtlUkVazJ%2BTgSY6fqprqO6qLR8Eqdcv6%2BAoDZWnT8Qman1M1dGsu7N3FckHsscV%2FXZlJLz0fYUQOm0Lh%2FT2EkgqsUJf%2Fu1%2Fmke5hkmeSzk1sp9hK0WstEQxdq9xJxNjWvsIVVOWtk0gk5pbHE6MTxZj%2Fdcy8jLnkjaoHzwuhduLxuio56qn7l6wEjnfauBjKwSD%2FB4IbwwMm3u%2FBXg41v5WML1NeJinTfg2NAbOp7bKnB9QdFbwkmtSYfpA%2B5LNaJtDJcrXmiuy%2FPn6S8T9C3Gf7YLKPyuBiQc%2BoGkskU4a05RpLce8JKjjl8kC0o%3D--hg23tfXB%2FY%2BE8mNa--74jHiUVHGc4XxwVeLNE8KQ%3D%3D; feed:/@patricezoeb/activity=0; feed:/feed/all=0; feed:/@patricezoeb/activity/875643=0' \
-H 'Sec-Fetch-Dest: empty'

Response:
{
    "url": "https://storage.googleapis.com/hardcover/",
    "fields": {
        "x-goog-date": "20250626T203952Z",
        "x-goog-credential": "hardcover-production@hardcover-313100.iam.gserviceaccount.com/20250626/auto/storage/goog4_request",
        "x-goog-algorithm": "GOOG4-RSA-SHA256",
        "x-goog-signature": "733e6b11165fb38a1d38657f1d25a659d8ad7fa9f25655116f964de29d3b6a324cb235deca1472a17b4613250636fdde9559ed158c0b7a8247df44430dc0e98b11bd90641ddf886f43f4e11d3b074a2265334addfe327e25326953d356a6a7adb9c7e2e6f909da8cd6819856bfc62748334bbd347ce6c5e43c80eba0ac05fef4b4b27c8fc3c5702a25801ad8127f75897ccda34dd662464bf50f43fa0f09db62d8ff5232c642542e19fd34d1d5114d6b8103401a22807accda5a020fa868fd118c9dafb8742fd2bbb30b5365de46ea921016108731ad8577d5cdbd7f8d21c049315b9f6a34c518ae07a59c95ba21463a73cbc3c30ca2326c8693ee30a7e552ec",
        "policy": "eyJjb25kaXRpb25zIjpbWyJjb250ZW50LWxlbmd0aC1yYW5nZSIsMSw1MjQyODgwMF0seyJidWNrZXQiOiJoYXJkY292ZXIifSx7ImtleSI6ImVkaXRpb25zLzMwNDA0MTU5L2I3M2UwN2U4LWVhNDktNDM4MS04NmYwLTUwMWFiZTI0NTg4ZC53ZWJwIn0seyJ4LWdvb2ctZGF0ZSI6IjIwMjUwNjI2VDIwMzk1MloifSx7IngtZ29vZy1jcmVkZW50aWFsIjoiaGFyZGNvdmVyLXByb2R1Y3Rpb25AaGFyZGNvdmVyLTMxMzEwMC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbS8yMDI1MDYyNi9hdXRvL3N0b3JhZ2UvZ29vZzRfcmVxdWVzdCJ9LHsieC1nb29nLWFsZ29yaXRobSI6IkdPT0c0LVJTQS1TSEEyNTYifV0sImV4cGlyYXRpb24iOiIyMDgwLTEyLTIwVDE3OjIwOjQ0WiJ9",
        "key": "editions/30404159/b73e07e8-ea49-4381-86f0-501abe24588d.webp"
    }
}

## 2 - Upload image

curl 'https://storage.googleapis.com/hardcover/' \
-X 'POST' \
-H 'Content-Type: multipart/form-data; boundary=----WebKitFormBoundaryDPWeA1zxlrou0WVr' \
-H 'Accept: */*' \
-H 'Sec-Fetch-Site: cross-site' \
-H 'Accept-Language: en-US,en;q=0.9' \
-H 'Accept-Encoding: gzip, deflate, br' \
-H 'Sec-Fetch-Mode: no-cors' \
-H 'Host: storage.googleapis.com' \
-H 'Origin: https://hardcover.app' \
-H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.1 Safari/605.1.15' \
-H 'Referer: https://hardcover.app/' \
-H 'Content-Length: 15134' \
-H 'Connection: keep-alive' \
-H 'Sec-Fetch-Dest: empty' \
--data-raw $'------WebKitFormBoundaryDPWeA1zxlrou0WVr\r\nContent-Disposition: form-data; name="x-goog-date"\r\n\r\n20250626T203952Z\r\n------WebKitFormBoundaryDPWeA1zxlrou0WVr\r\nContent-Disposition: form-data; name="x-goog-credential"\r\n\r\nhardcover-production@hardcover-313100.iam.gserviceaccount.com/20250626/auto/storage/goog4_request\r\n------WebKitFormBoundaryDPWeA1zxlrou0WVr\r\nContent-Disposition: form-data; name="x-goog-algorithm"\r\n\r\nGOOG4-RSA-SHA256\r\n------WebKitFormBoundaryDPWeA1zxlrou0WVr\r\nContent-Disposition: form-data; name="x-goog-signature"\r\n\r\n733e6b11165fb38a1d38657f1d25a659d8ad7fa9f25655116f964de29d3b6a324cb235deca1472a17b4613250636fdde9559ed158c0b7a8247df44430dc0e98b11bd90641ddf886f43f4e11d3b074a2265334addfe327e25326953d356a6a7adb9c7e2e6f909da8cd6819856bfc62748334bbd347ce6c5e43c80eba0ac05fef4b4b27c8fc3c5702a25801ad8127f75897ccda34dd662464bf50f43fa0f09db62d8ff5232c642542e19fd34d1d5114d6b8103401a22807accda5a020fa868fd118c9dafb8742fd2bbb30b5365de46ea921016108731ad8577d5cdbd7f8d21c049315b9f6a34c518ae07a59c95ba21463a73cbc3c30ca2326c8693ee30a7e552ec\r\n------WebKitFormBoundaryDPWeA1zxlrou0WVr\r\nContent-Disposition: form-data; name="policy"\r\n\r\neyJjb25kaXRpb25zIjpbWyJjb250ZW50LWxlbmd0aC1yYW5nZSIsMSw1MjQyODgwMF0seyJidWNrZXQiOiJoYXJkY292ZXIifSx7ImtleSI6ImVkaXRpb25zLzMwNDA0MTU5L2I3M2UwN2U4LWVhNDktNDM4MS04NmYwLTUwMWFiZTI0NTg4ZC53ZWJwIn0seyJ4LWdvb2ctZGF0ZSI6IjIwMjUwNjI2VDIwMzk1MloifSx7IngtZ29vZy1jcmVkZW50aWFsIjoiaGFyZGNvdmVyLXByb2R1Y3Rpb25AaGFyZGNvdmVyLTMxMzEwMC5pYW0uZ3NlcnZpY2VhY2NvdW50LmNvbS8yMDI1MDYyNi9hdXRvL3N0b3JhZ2UvZ29vZzRfcmVxdWVzdCJ9LHsieC1nb29nLWFsZ29yaXRobSI6IkdPT0c0LVJTQS1TSEEyNTYifV0sImV4cGlyYXRpb24iOiIyMDgwLTEyLTIwVDE3OjIwOjQ0WiJ9\r\n------WebKitFormBoundaryDPWeA1zxlrou0WVr\r\nContent-Disposition: form-data; name="key"\r\n\r\neditions/30404159/b73e07e8-ea49-4381-86f0-501abe24588d.webp\r\n------WebKitFormBoundaryDPWeA1zxlrou0WVr\r\nContent-Disposition: form-data; name="file"; filename="cover-14.webp"\r\nContent-Type: image/webp\r\n\r\n\r\n------WebKitFormBoundaryDPWeA1zxlrou0WVr--\r\n'

Response: 204

## 3 - GraphQL

curl 'https://api.hardcover.app/v1/graphql' \
-X 'POST' \
-H 'Content-Type: application/json' \
-H 'Accept: */*' \
-H 'Authorization: Bearer eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJIYXJkY292ZXIiLCJ2ZXJzaW9uIjoiOCIsImp0aSI6ImFlMTIyNWI3LTJkMjMtNDI1OS04MmFhLTdhNDM5ZjlhNmY5NCIsImFwcGxpY2F0aW9uSWQiOjMsInN1YiI6IjM2MzA3IiwiYXVkIjoiMSIsImlkIjoiMzYzMDciLCJsb2dnZWRJbiI6dHJ1ZSwiaWF0IjoxNzUwOTcwMjk3LCJleHAiOjE3NTA5NzExOTcsImh0dHBzOi8vaGFzdXJhLmlvL2p3dC9jbGFpbXMiOnsieC1oYXN1cmEtYWxsb3dlZC1yb2xlcyI6WyJ1c2VyIl0sIngtaGFzdXJhLWRlZmF1bHQtcm9sZSI6InVzZXIiLCJ4LWhhc3VyYS1yb2xlIjoidXNlciIsIlgtaGFzdXJhLXVzZXItaWQiOiIzNjMwNyJ9LCJ1c2VyIjp7ImlkIjozNjMwN319.Mtm2z09wZbd1cZ7vADUKwFfTgG2x6zEnVIVHkAOMieQ' \
-H 'Sec-Fetch-Site: same-site' \
-H 'Accept-Language: en-US,en;q=0.9' \
-H 'Accept-Encoding: gzip, deflate, br' \
-H 'Sec-Fetch-Mode: cors' \
-H 'Host: api.hardcover.app' \
-H 'Origin: https://hardcover.app' \
-H 'Content-Length: 562' \
-H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.1 Safari/605.1.15' \
-H 'Referer: https://hardcover.app/' \
-H 'Connection: keep-alive' \
-H 'Sec-Fetch-Dest: empty' \
--data-raw '{"operationName":"InsertImage","variables":{"image":{"imageable_type":"Edition","imageable_id":30404159,"url":"https://storage.googleapis.com/hardcover/editions/30404159/b73e07e8-ea49-4381-86f0-501abe24588d.webp"}},"query":"mutation InsertImage($image: ImageInput!) {\n  insertResponse: insert_image(image: $image) {\n    image {\n      ...ImageFragment\n      __typename\n    }\n    __typename\n  }\n}\n\nfragment ImageFragment on images {\n  id\n  url\n  color\n  height\n  width\n  imageableId: imageable_id\n  imageableType: imageable_type\n  __typename\n}"}'

Response:
{
    "data": {
        "insertResponse": {
            "image": {
                "id": 5179329,
                "url": "https://assets.hardcover.app/editions/30404159/b73e07e8-ea49-4381-86f0-501abe24588d.webp",
                "color": "#199aab",
                "height": 400,
                "width": 400,
                "imageableId": 30404159,
                "imageableType": "Edition",
                "__typename": "images"
            },
            "__typename": "ImageIdType"
        }
    }
}